<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Spinz The Zebra ‚Äî Spinning Wheel</title>
  <style>
    :root{--bg:#5c0b0b;--accent:#ffd700;--panel:#fff0e6}
    body{font-family:Inter, system-ui, Arial;display:flex;align-items:center;justify-content:center;min-height:100vh;margin:0;background:linear-gradient(180deg,#2b0b0b,#3f0e0e)}
    .container{width:960px;max-width:96vw;background:linear-gradient(180deg,#581212,#8b1f1f);padding:24px;border-radius:28px;color:#fff;box-shadow:0 10px 40px rgba(0,0,0,.6);}
    h1{font-size:44px;margin:6px 0 12px;text-align:center;letter-spacing:2px}
    .wheel-wrap{display:flex;gap:20px;align-items:center;justify-content:center}
    .wheel{width:520px;height:520px;border-radius:50%;background:#fff;position:relative;overflow:visible;box-shadow:0 6px 20px rgba(0,0,0,.5)}
    #spinCanvas{width:100%;height:100%;display:block}
    .pointer{position:absolute;left:50%;transform:translateX(-50%);top:-12px;width:0;height:0;border-left:18px solid transparent;border-right:18px solid transparent;border-bottom:30px solid var(--accent);filter:drop-shadow(0 4px 6px rgba(0,0,0,.4))}
    .controls{display:flex;flex-direction:column;gap:12px;align-items:center}
    .btn{background:var(--accent);border:none;padding:12px 20px;border-radius:12px;font-weight:700;cursor:pointer;box-shadow:0 6px 14px rgba(0,0,0,.35)}
    .btn:active{transform:translateY(2px)}
    .result{margin-top:12px;background:rgba(255,255,255,0.1);padding:8px 12px;border-radius:10px}
    .legend{display:flex;flex-wrap:wrap;gap:8px;max-width:420px;margin-top:12px}
    .legend span{background:rgba(255,255,255,0.07);padding:6px 10px;border-radius:8px;font-size:13px}
    footer{margin-top:12px;text-align:center;font-size:13px;opacity:.85}
  </style>
</head>
<body>
  <div class="container">
    <h1>SPINZ THE ZEBRA</h1>
    <div class="wheel-wrap">
      <div style="flex:0 0 540px;position:relative">
        <div class="pointer" id="pointer"></div>
        <div class="wheel" role="img" aria-label="Spinning wheel">
          <canvas id="spinCanvas" width="520" height="520"></canvas>
        </div>
      </div>
      <div class="controls">
        <input type="text" id="playerName" placeholder="Masukkan nama Anda" style="padding:8px;border-radius:8px;border:none;text-align:center;">
        <button class="btn" id="spinBtn">SPIN</button>
        <div class="result" id="result">Putar untuk melihat hadiah</div>
        <div class="legend" id="legend"></div>
      </div>
    </div>
    <div id="history" style="margin-top:20px;text-align:center;background:rgba(255,255,255,0.1);padding:10px;border-radius:12px;max-height:200px;overflow:auto;">
      <strong>Daftar Pemenang:</strong>
      <ul id="winnerList" style="list-style:none;padding:0;margin:10px 0 0 0;text-align:left;display:inline-block;"></ul>
    </div>
    <footer>Contoh interaktif: dapat dimainkan oleh banyak orang.</footer>
  </div>

  <script>
    const segments = [
      {label: 'TOTEBAG', emoji: 'üëú'},
      {label: 'CHOC+ TOFF', emoji: 'üç´'},
      {label: 'SUKA-SUKA', emoji: 'üéÅ'},
      {label: 'CANGKIR', emoji: '‚òï'},
      {label: 'EARBUDS', emoji: 'üéß'},
      {label: 'GANTUNGAN KUNCI', emoji: 'üîë'},
      {label: 'STICKER', emoji: 'üè∑Ô∏è'},
      {label: 'CANDY BAR', emoji: 'üç¨'}
    ];

    const canvas = document.getElementById('spinCanvas');
    const ctx = canvas.getContext('2d');
    const cx = canvas.width/2, cy = canvas.height/2, radius = Math.min(cx,cy)-8;
    const segCount = segments.length;
    const degPer = 360/segCount;

    function drawWheel() {
      ctx.clearRect(0,0,canvas.width,canvas.height);
      ctx.save();
      ctx.translate(cx,cy);
      for (let i=0;i<segCount;i++){
        const start = (i*degPer-90) * Math.PI/180;
        const end = ((i+1)*degPer-90) * Math.PI/180;
        ctx.beginPath();
        ctx.moveTo(0,0);
        ctx.arc(0,0,radius,start,end);
        ctx.closePath();
        ctx.fillStyle = i%2 ? '#311010' : '#f7e7d7';
        ctx.fill();
        ctx.strokeStyle = 'rgba(0,0,0,0.12)';
        ctx.lineWidth = 2;
        ctx.stroke();
        ctx.save();
        ctx.rotate((start+end)/2);
        ctx.textAlign = 'center';
        ctx.fillStyle = i%2 ? '#fff' : '#2b0b0b';
        ctx.font = 'bold 18px Arial';
        ctx.fillText(segments[i].emoji, radius*0.6, -10);
        ctx.font = 'bold 14px Arial';
        ctx.fillText(segments[i].label, radius*0.35, 18);
        ctx.restore();
      }
      ctx.beginPath();
      ctx.fillStyle = '#8b1f1f';
      ctx.arc(0,0,46,0,Math.PI*2);
      ctx.fill();
      ctx.fillStyle = '#fff';
      ctx.font = 'bold 16px Arial';
      ctx.textAlign = 'center';
      ctx.fillText('SPIN',0,6);
      ctx.restore();
    }
    drawWheel();

    const legend = document.getElementById('legend');
    segments.forEach(s=>{
      const el = document.createElement('span');
      el.textContent = `${s.emoji} ${s.label}`;
      legend.appendChild(el);
    });

    const spinBtn = document.getElementById('spinBtn');
    const result = document.getElementById('result');
    const winnerList = document.getElementById('winnerList');
    let isSpinning = false, currentRotation = 0;

    function easeOutCubic(t){return 1-Math.pow(1-t,3)}

    spinBtn.addEventListener('click', ()=>{
      if (isSpinning) return;
      const player = document.getElementById('playerName').value.trim();
      if (!player){alert('Masukkan nama dulu!');return;}
      isSpinning = true;
      result.textContent = 'Memutar...';
      const rounds = Math.floor(Math.random()*3)+4;
      const targetIndex = Math.floor(Math.random()*segCount);
      const targetAngle = (360 - (targetIndex * degPer) - degPer/2) % 360;
      const totalAngle = rounds*360 + targetAngle;
      const duration = 4200 + Math.floor(Math.random()*1600);
      const start = performance.now();
      const startAngle = currentRotation || 0;

      function animate(now){
        const t = Math.min((now-start)/duration,1);
        const eased = easeOutCubic(t);
        const angle = startAngle + (totalAngle - startAngle) * eased;
        setRotation(angle);
        if (t<1) requestAnimationFrame(animate);
        else {
          isSpinning = false;
          const landed = (segCount - Math.floor(((angle%360)/degPer)))%segCount;
          const hadiah = `${segments[landed].label} ${segments[landed].emoji}`;
          result.innerHTML = `Selamat ${player}! Anda mendapatkan: <strong>${hadiah}</strong>`;
          const li = document.createElement('li');
          li.textContent = `${player} ‚Üí ${hadiah}`;
          winnerList.prepend(li);
        }
      }
      requestAnimationFrame(animate);
    });

    function setRotation(deg){
      currentRotation = deg;
      canvas.style.transform = `rotate(${deg}deg)`;
    }
    document.getElementById('pointer').addEventListener('click', ()=>spinBtn.click());
    canvas.style.transition = 'transform 0s linear';
    canvas.style.transformOrigin = '50% 50%';
  </script>
</body>
</html>
